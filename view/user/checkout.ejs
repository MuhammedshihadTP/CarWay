<%-include('../partials/heder.ejs') %>
<section class="shop checkout section">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-12">
        <div class="checkout-form">
          <h2>Make Your Checkout Here</h2>
          <p>Please register in order to checkout more quickly</p>
          <!-- Form -->
          <form class="form" method="post" action="/Bookings" >
            <div class="row">
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Full name<span>*</span></label>
                  <input type="text" name="name" required="required" />
                </div>
              </div>

              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Email Address<span>*</span></label>
                  <input type="email" name="email" required="required" />
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Vehicle Name<span>*</span></label>
                  <input
                    type="text"
                    name="vehiclename"
                    id="vehiclename"
                    value="<%=result.name %>"
                    required="required"
                  />
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Phone Number<span>*</span></label>
                  <input
                    type="number"
                    name="number"
                    placeholder=""
                    required="required"
                  />
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Address <span>*</span></label>
                  <input
                    type="text"
                    name="address"
                    placeholder=""
                    required="required"
                  />
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Licence Number<span>*</span></label>
                  <input
                    type="text"
                    name="licn"
                    placeholder=""
                    required="required"
                  />
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>Postal Code<span>*</span></label>
                  <input
                    type="text"
                    name="post"
                    placeholder=""
                    required="required"
                  />
                </div>
              </div>
              <h6>BOOKED TIME SLOTES</h6>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>FROM<span>*</span></label>

                  <input
                    type="datetime-local"
                    name="starttime"
                    required="required"
                    id="start"
                    onchange="selectTimeslote()"
                  />
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-12">
                <div class="form-group">
                  <label>To<span>*</span></label>

                  <input
                    type="datetime-local"
                    name="endtime"
                    required="required"
                    id="end"
                    onchange="selectTimeslote()"
                  />
                </div>
              </div>
              <!-- <div class="col-lg-6 col-md-6 col-12">
                <div style="display: flex;">
                  <button href="" class="btn" type="submit" >submit</button>
                  <button href="" class="btn ml-4">Cancel</button>
                </div> -->

                <div class="col-lg-6 col-md-6 col-12">
                  <div class="order-details">
                    <!-- Order Widget -->
                    <div class="single-widget">
                      <h2>TOTALS</h2>
                      <div class="content">
                        <ul>
                          <li>Hours Rate<span id="price"> <%=result.price %> </span></li>
                          <li>Total hours<span id="totalhours"></span></li>
                       
                          <li class="last">Total<span id="totale"></span></li>
                        </ul>
                      </div>
                    </div>
                  
                    <div class="single-widget payement">
                      <div class="content">
                        <img src="/images/payment-method.png" alt="#" />
                      </div>
                    </div>
                    <!--/ End Payment Method Widget -->
                    <!-- Button Widget -->
                    <div class="single-widget get-button">
                      <div class="content">
                        <div class="button">
                        <a href="/payment" ><button type="submit" id="checkout" class="btn">proceed to checkout</button></a>  
                        </div>
                      </div>
                    </div>
                    <!--/ End Button Widget -->
                  </div>
                </div>
              </div>
            </div>
          </form>
          <!--/ End Form -->
        </div>
      </div>
      
    </div>
  </div>
</section>
<%-include('../partials/footer.ejs') %>
<!--/ End Checkout -->
<script>
  function selectTimeslote() {
    const from = document.getElementById("start");
    const to = document.getElementById("end");

    const diffrence = new Date(to.value) - new Date(from.value);
    var hours = diffrence / (1000 * 60 * 60);

    document.getElementById("totalhours").innerHTML = hours;

    console.log(hours);
    const rupee = document.getElementById("price").innerText;
    console.log(rupee);

    const total=(hours*rupee)
    document.getElementById('totale').innerHTML=total
    console.log(total);
  }

//   function clicked(){
//     Swal.fire({
//   title: 'Click The Cheack Out Boutton',
//   showClass: {
//     popup: 'animate__animated animate__fadeInDown'
//   },
//   hideClass: {
//     popup: 'animate__animated animate__fadeOutUp'
//   }
// })
//   }

// const buttoun=document.querySelector("#checkout")
// const name=document.getElementById("vehiclename").value
//   const rupee = document.getElementById("price").innerText;
// buttoun.addEventListener('click',()=>{
//   fetch("http://localhost:3000/payment", {
//         headers: {'Content-Type': 'application/json'},
//         method: "POST",
//         body: JSON.stringify({
//             "product": {
//                 "name": name, 
//                 "image": "", 
//                 "amount": rupee,
//                 // "quantity": 1
//             }})
//       })
//         .then(function (response) {
//           return response.json();
//         })
//         .then(function (session) {
//           return stripe.redirectToCheckout({ sessionId: session.id });
//         })
//         .then(function (result) {
       
//           if (result.error) {
//             alert(result.error.message);
//           }
//         })
//         .catch(function (error) {
//           console.error("Error:", error);
//         });


// })



</script>
